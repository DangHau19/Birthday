<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday Ph·∫°m Th·ªã Ho√†ng Linh</title>
    <style>
        /* --- CSS STYLING (GI·ªÆ NGUY√äN) --- */
        body {
            margin: 0; padding: 0; overflow: hidden;
            background-color: #050505; /* ƒêen s√¢u h∆°n */
            font-family: 'Arial', sans-serif;
            height: 100vh; width: 100vw; user-select: none;
        }

        /* N√∫t Start */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 999;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; transition: opacity 1s ease;
        }
        .start-btn {
            padding: 15px 40px; font-size: 2rem;
            background: linear-gradient(45deg, #ff0055, #ff3399);
            color: white; border: none; border-radius: 50px;
            cursor: pointer; box-shadow: 0 0 30px #ff0055;
            animation: pulse 1.5s infinite;
            font-family: 'Verdana', sans-serif; font-weight: bold;
        }
        .start-btn:hover { transform: scale(1.1); }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 85, 0.7); }
            70% { box-shadow: 0 0 0 25px rgba(255, 0, 85, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 85, 0); }
        }

        /* C√°c l·ªõp hi·ªÉn th·ªã */
        canvas { position: absolute; top: 0; left: 0; z-index: 1; filter: contrast(1.2); }
        
        #decoration-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; pointer-events: none; overflow: hidden;
        }
        .sticker {
            position: absolute; font-size: 2rem; opacity: 0.8;
            filter: drop-shadow(0 0 10px rgba(255,255,255,0.5));
            animation: floatAnim 6s ease-in-out infinite;
        }
        @keyframes floatAnim {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-25px) rotate(15deg); }
        }

        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; display: flex; justify-content: center; align-items: center;
            flex-direction: column; pointer-events: none; text-align: center;
        }

        .counter {
            font-size: 15vw; font-weight: bold; color: white;
            opacity: 0; transition: opacity 0.5s;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
        }

        .date-text {
            font-size: 8vw; color: #00ffff; text-shadow: 0 0 30px #00ffff;
            opacity: 0; position: absolute; transition: all 1s ease;
        }

        .final-msg {
            opacity: 0; transition: opacity 2s ease; margin-top: 300px; /* ƒê·∫©y th·∫•p xu·ªëng n·ªØa */
        }

        h1 {
            font-size: 5rem; margin: 0; color: #33e7ff;
            text-shadow: 0 0 25px #99fffa; font-family: 'Verdana', sans-serif;
            text-transform: uppercase; letter-spacing: 2px;
        }
        p { font-size: 1.3rem; color: #ddd; margin-top: 15px; font-style: italic; }
        
        .zoom-in { animation: zoomEffect 1s forwards; }
        @keyframes zoomEffect {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <button class="start-btn" onclick="startParty()">M·ªü Qu√† Sinh Nh·∫≠t üéÅ</button>
        <p style="color: #888; margin-top: 20px;">(Click ƒë·ªÉ b·∫Øt ƒë·∫ßu)</p>
    </div>

    <audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>
    <audio id="tick-sound"><source src="tick.mp3" type="audio/mpeg"></audio>

    <canvas id="galaxy"></canvas>
    <div id="decoration-layer"></div>
    <div id="ui-layer">
        <div id="counter" class="counter">0</div>
        <div id="date" class="date-text">26 / 12 / 2025</div>
        <div id="final-msg" class="final-msg">
            <h1 id="name-display">PH·∫†M TH·ªä HO√ÄNG LINH</h1>
            <p>Ch√∫c em tu·ªïi 19 r·∫°ng r·ª° nh∆∞ d·∫£i ng√¢n h√†! üåå</p>
        </div>
    </div>

    <script>
        /* ==========================================
           C·∫§U H√åNH LOGIC (TƒÉng s·ªë l∆∞·ª£ng h·∫°t l√™n ƒë·ªÉ ƒë·∫πp h∆°n)
           ========================================== */
        const CONFIG = {
            particleCount: 1200, // TƒÉng l√™n 1200 h·∫°t ƒë·ªÉ tim d√†y v√† ƒë·∫πp
            stickers: ['üéÑ', 'üéÇ', 'üéÅ', '‚ùÑÔ∏è', 'ü¶å', 'üïØÔ∏è', 'üç¨', '‚ú®', 'üíñ'],
            stickerCount: 20
        };

        const bgMusic = document.getElementById('bg-music');
        const tickSound = document.getElementById('tick-sound');
        
        function startParty() {
            const startScreen = document.getElementById('start-screen');
            startScreen.style.opacity = 0;
            setTimeout(() => startScreen.remove(), 1000);
            createDecorations();
            animate();
            startIntroScript();
        }

        /* ==========================================
           CORE ANIMATION ENGINE (PH·∫¶N QUAN TR·ªåNG NH·∫§T)
           ========================================== */
        const canvas = document.getElementById('galaxy');
        const ctx = canvas.getContext('2d');
        let width, height;
        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        // H√†m to√°n h·ªçc tr√°i tim g·ªëc
        function heartFunc(t) {
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
            return { x, y };
        }

        // CLASS: H·∫°t Galaxy (ƒê√£ n√¢ng c·∫•p)
        class GalaxyParticle {
            constructor() {
                this.reset(true); // true = kh·ªüi t·∫°o ng·∫´u nhi√™n ban ƒë·∫ßu
            }

            reset(initial = false) {
                // 1. X√°c ƒë·ªãnh v·ªã tr√≠ tr√™n ƒë∆∞·ªùng vi·ªÅn tim
                let t = Math.random() * Math.PI * 2;
                let pos = heartFunc(t);
                
                // 2. T·∫°o hi·ªáu ·ª©ng "Filling" (L·∫•p ƒë·∫ßy b√™n trong)
                // D√πng cƒÉn b·∫≠c 2 c·ªßa random ƒë·ªÉ ph√¢n b·ªë ƒë·ªÅu h·∫°t t·ª´ t√¢m ra vi·ªÅn
                // dir: ƒë·ªô ph√¢n t√°n. N·∫øu dir < 1 th√¨ h·∫°t n·∫±m trong tim.
                let dir = Math.sqrt(Math.random()); 
                
                // Bi·∫øn ƒë·ªïi v·ªã tr√≠:
                // T√¢m m√†n h√¨nh + (T·ªça ƒë·ªô tim * ƒë·ªô l·ªõn * ƒë·ªô ph√¢n t√°n)
                let scale = 16; // ƒê·ªô to c∆° b·∫£n
                
                // T·∫°o 2 l·ªõp: L·ªõp l√µi (d√†y ƒë·∫∑c) v√† L·ªõp h√†o quang (bay xa h∆°n)
                let type = Math.random();
                if (type < 0.7) {
                    // 70% h·∫°t n·∫±m g·ªçn trong tr√°i tim (Solid core)
                    dir = dir * 0.9; 
                } else {
                    // 30% h·∫°t bay l∆° l·ª≠ng b√™n ngo√†i t·∫°o glow (Aura)
                    dir = dir * 1.2 + 0.2;
                }

                this.targetX = pos.x * scale * dir + width / 2;
                this.targetY = -pos.y * scale * dir + height / 2 - 60; // D·ªùi l√™n tr√™n ch√∫t
                
                // V·ªã tr√≠ th·ª±c t·∫ø
                this.x = this.targetX;
                this.y = this.targetY;

                // Thu·ªôc t√≠nh chuy·ªÉn ƒë·ªông
                this.size = Math.random() * 2; // K√≠ch th∆∞·ªõc ng·∫´u nhi√™n
                this.baseSize = this.size;
                this.blinkSpeed = Math.random() * 0.1 + 0.02; // T·ªëc ƒë·ªô nh·∫•p nh√°y
                this.blinkOffset = Math.random() * Math.PI * 2;
                
                // M√†u s·∫Øc Galaxy: H·ªìng, T√≠m, Xanh, Tr·∫Øng
                const colors = ['#ff0055', '#ff3399', '#cc33ff', '#6600ff', '#ffffff', '#ffccff'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                
                // ƒê·ªô rung (Jitter) ri√™ng cho t·ª´ng h·∫°t
                this.jitterX = (Math.random() - 0.5) * 20; 
                this.jitterY = (Math.random() - 0.5) * 20;
            }

            update(beatScale, time) {
                // Hi·ªáu ·ª©ng 1: Nh·∫•p nh√°y (Twinkle)
                // Thay ƒë·ªïi k√≠ch th∆∞·ªõc theo h√†m sin ƒë·ªÉ t·∫°o c·∫£m gi√°c l·∫•p l√°nh
                this.size = this.baseSize + Math.sin(time * 5 + this.blinkOffset) * 0.5;
                if (this.size < 0) this.size = 0;

                // Hi·ªáu ·ª©ng 2: Di chuy·ªÉn theo nh·ªãp tim nh∆∞ng m·ªÅm m·∫°i h∆°n
                // T√≠nh vector t·ª´ t√¢m
                let cx = width / 2;
                let cy = height / 2 - 60;
                
                // V·ªã tr√≠ mong mu·ªën khi tim ƒë·∫≠p (Target Position)
                let currentTargetX = cx + (this.targetX - cx) * beatScale;
                let currentTargetY = cy + (this.targetY - cy) * beatScale;

                // Th√™m ƒë·ªô nhi·ªÖu (Noise) ƒë·ªÉ h·∫°t tr√¥ng nh∆∞ ƒëang bay nh·∫π
                // time * t·ªëc ƒë·ªô -> t·∫°o chuy·ªÉn ƒë·ªông xoay nh·∫π
                let noiseX = Math.cos(time + this.jitterX) * 2; 
                let noiseY = Math.sin(time + this.jitterY) * 2;

                this.x = currentTargetX + noiseX;
                this.y = currentTargetY + noiseY;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                // Hi·ªáu ·ª©ng ph√°t s√°ng ch·ªìng l·ªõp (Quan tr·ªçng ƒë·ªÉ t·∫°o ra v·∫ª Galaxy)
                ctx.globalCompositeOperation = 'lighter'; 
                ctx.shadowBlur = 5; // ƒê·ªï b√≥ng s√°ng
                ctx.shadowColor = this.color;
                ctx.fill();
                ctx.shadowBlur = 0; // Reset ƒë·ªÉ kh√¥ng n·∫∑ng m√°y
                ctx.globalCompositeOperation = 'source-over';
            }
        }

        /* --- FIREWORKS (PH√ÅO HOA) --- */
        class Firework {
            constructor() {
                this.x = Math.random() * width; this.y = height;
                this.targetY = Math.random() * (height / 2);
                this.speed = 6 + Math.random() * 4; 
                this.radius = 2; this.exploded = false;
                this.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
                this.particles = [];
            }
            update() {
                if (!this.exploded) {
                    this.y -= this.speed;
                    if (this.y <= this.targetY) this.explode();
                } else {
                    this.particles.forEach((p, i) => {
                        p.x += p.vx; p.y += p.vy; p.alpha -= 0.02; p.vy += 0.05; // C√≥ tr·ªçng l·ª±c r∆°i xu·ªëng
                        if (p.alpha <= 0) this.particles.splice(i, 1);
                    });
                }
            }
            explode() {
                this.exploded = true;
                for (let i = 0; i < 50; i++) {
                    const a = Math.random() * Math.PI * 2, s = Math.random() * 4 + 1;
                    this.particles.push({x: this.x, y: this.y, vx: Math.cos(a)*s, vy: Math.sin(a)*s, alpha: 1});
                }
            }
            draw() {
                if (!this.exploded) {
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = this.color; ctx.fill();
                } else {
                    this.particles.forEach(p => {
                        ctx.save(); ctx.globalAlpha = p.alpha; ctx.fillStyle = this.color;
                        ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fill(); ctx.restore();
                    });
                }
            }
        }

        // Kh·ªüi t·∫°o
        const heartParticles = [];
        const fireworks = [];
        for (let i = 0; i < CONFIG.particleCount; i++) heartParticles.push(new GalaxyParticle());

        function createDecorations() {
            const layer = document.getElementById('decoration-layer');
            for(let i=0; i<CONFIG.stickerCount; i++) {
                const el = document.createElement('div');
                el.className = 'sticker';
                el.innerText = CONFIG.stickers[Math.floor(Math.random() * CONFIG.stickers.length)];
                let x, y;
                do { x = Math.random() * 100; y = Math.random() * 100; } 
                while (x > 35 && x < 65 && y > 25 && y < 75); // Tr√°nh v√πng gi·ªØa tim
                el.style.left = x + '%'; el.style.top = y + '%';
                el.style.fontSize = (Math.random() * 2 + 1.5) + 'rem';
                el.style.animationDuration = (Math.random() * 3 + 4) + 's';
                layer.appendChild(el);
            }
        }

        // Loop ch√≠nh
        let frame = 0, showHeart = false;
        let time = 0;
        function animate() {
            // Hi·ªáu ·ª©ng m·ªù d·∫ßn ƒë·ªÉ t·∫°o ƒëu√¥i (Trail effect) cho ph√°o hoa
            ctx.fillStyle = 'rgba(5, 5, 5, 0.2)'; 
            ctx.fillRect(0, 0, width, height);
            
            time += 0.01; // Th·ªùi gian tr√¥i

            if (showHeart) {
                // Nh·ªãp tim ph·ª©c t·∫°p h∆°n: ƒê·∫≠p nhanh r·ªìi ngh·ªâ (Gi·ªëng tim th·∫≠t)
                // D√πng c√¥ng th·ª©c pow(sin, 63) ƒë·ªÉ t·∫°o c√∫ ƒë·∫≠p d·ª©t kho√°t
                let beat = 1 + 0.1 * Math.pow(Math.sin(time * 3), 63); 
                // Ho·∫∑c d√πng c√°i c≈© n·∫øu th√≠ch √™m ƒë·ªÅm: beat = 1 + 0.08 * Math.sin(time * 3);
                
                // Nh∆∞ng ta d√πng c√°i scale nh·∫π nh√†ng h∆°n cho Galaxy
                let smoothBeat = 1 + 0.05 * Math.sin(time * 4);

                heartParticles.forEach(p => { 
                    p.update(smoothBeat, time); 
                    p.draw(); 
                });

                if (Math.random() < 0.03) fireworks.push(new Firework());
                for (let i = fireworks.length - 1; i >= 0; i--) {
                    fireworks[i].update(); fireworks[i].draw();
                    if (fireworks[i].exploded && fireworks[i].particles.length === 0) fireworks.splice(i, 1);
                }
            }
            requestAnimationFrame(animate);
        }

        /* ==========================================
           LOGIC K·ªäCH B·∫¢N (KH√îNG ƒê·ªîI)
           ========================================== */
        const counterEl = document.getElementById('counter');
        const dateEl = document.getElementById('date');
        const finalMsgEl = document.getElementById('final-msg');
        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));
        function playTick() { if(tickSound) { tickSound.currentTime=0; tickSound.play().catch(()=>{}); } }

        async function startIntroScript() {
            counterEl.style.opacity = 1;
            for (let i = 0; i <= 19; i++) {
                counterEl.innerText = i;
                if (i < 19) {
                    playTick();
                } else {
                    // S·ª∞ KI·ªÜN S·ªê 19
                    counterEl.style.color = '#ff3399';
                    counterEl.classList.add('zoom-in');
                    counterEl.innerText = "WELCOME 19";
                    counterEl.style.fontSize = "10vw";
                    bgMusic.volume = 0.6;
                    bgMusic.play().catch((e) => console.log(e));
                }
                let speed = i < 10 ? 150 : 250;
                if (i === 18) speed = 1000;
                await wait(speed);
            }
            await wait(1000);
            counterEl.style.opacity = 0;
            await wait(500);

            dateEl.style.opacity = 1;
            await wait(2000);
            dateEl.style.opacity = 0;
            await wait(500);

            showHeart = true;
            await wait(800);
            finalMsgEl.style.opacity = 1;
        }
    </script>
</body>
</html>