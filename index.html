<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ph·∫°m Th·ªã Ho√†ng Linh</title>
    <style>
        /* --- CSS STYLING RESPONSIVE --- */
        body {
            margin: 0; padding: 0; overflow: hidden;
            background-color: #050505;
            font-family: 'Arial', sans-serif;
            height: 100vh; width: 100vw;
            user-select: none;
            /* CƒÉn gi·ªØa to√†n b·ªô body */
            display: flex; justify-content: center; align-items: center;
        }

        /* N√∫t Start - Responsive */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; z-index: 999;
            display: flex; justify-content: center; align-items: center;
            flex-direction: column; transition: opacity 1s ease;
        }
        .start-btn {
            padding: 15px 30px; /* Nh·ªè l·∫°i ch√∫t cho mobile */
            font-size: 1.5rem;
            background: linear-gradient(45deg, #ff0055, #ff3399);
            color: white; border: none; border-radius: 50px;
            cursor: pointer; box-shadow: 0 0 30px #ff0055;
            animation: pulse 1.5s infinite;
            font-weight: bold;
            white-space: nowrap; /* Kh√¥ng xu·ªëng d√≤ng */
        }
        
        canvas { position: absolute; top: 0; left: 0; z-index: 1; }
        
        #decoration-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; pointer-events: none; overflow: hidden;
        }
        
        .sticker {
            position: absolute; opacity: 0.8;
            animation: floatAnim 6s ease-in-out infinite;
        }

        #ui-layer {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 10; 
            display: flex; 
            justify-content: center; 
            align-items: center; /* Quan tr·ªçng: CƒÉn gi·ªØa d·ªçc v√† ngang */
            flex-direction: column; 
            pointer-events: none; 
            text-align: center;
        }

        /* Responsive Text Sizes */
        .counter {
            font-weight: bold; color: white;
            opacity: 0; transition: opacity 0.5s;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.8);
            font-size: 20vw; /* To tr√™n mobile */
        }
        
        .date-text {
            color: #00ffff; text-shadow: 0 0 30px #00ffff;
            opacity: 0; 
            position: absolute; 
            transition: all 1s ease;
            font-size: 10vw;
            top: 65%; /* ƒê·∫©y xu·ªëng v·ªã tr√≠ 65% m√†n h√¨nh (50% l√† gi·ªØa) */
            left: 50%;
            transform: translate(-50%, -50%); /* CƒÉn gi·ªØa l·∫°i cho chu·∫©n */
            width: 100%;
        }

        .final-msg {
            opacity: 0; transition: opacity 2s ease; 
            /* D√πng absolute ƒë·ªÉ ƒë·∫∑t v·ªã tr√≠ ch√≠nh x√°c d∆∞·ªõi tim */
            position: absolute;
            bottom: 10%; 
            width: 90%; /* Tr√°nh b·ªã s√°t l·ªÅ */
            left: 50%;
            transform: translateX(-50%);
        }

        h1 {
            color: #33e7ff; text-shadow: 0 0 25px #99fffa;
            font-family: 'Verdana', sans-serif; text-transform: uppercase;
            font-size: 8vw; /* Responsive font size */
            margin-bottom: 10px;
        }

        p { 
            color: #ddd; font-style: italic; 
            font-size: 4vw; /* Responsive font size */
        }

        /* Media Query cho PC (M√†n h√¨nh to) */
        @media (min-width: 768px) {
            .counter { font-size: 10rem; }
            .date-text { font-size: 5rem; }
            h1 { font-size: 3.5rem; }
            p { font-size: 1.5rem; }
            .final-msg { bottom: 15%; }
            .start-btn { font-size: 2rem; padding: 20px 50px; }
        }

        .zoom-in { animation: zoomEffect 1s forwards; }
        @keyframes zoomEffect {
            0% { transform: scale(0.5); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 1; }
        }
        @keyframes floatAnim {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-25px) rotate(15deg); }
        }
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255, 0, 85, 0.7); }
            70% { box-shadow: 0 0 0 20px rgba(255, 0, 85, 0); }
            100% { box-shadow: 0 0 0 0 rgba(255, 0, 85, 0); }
        }
    </style>
</head>
<body>

    <div id="start-screen">
        <button class="start-btn" onclick="startParty()">M·ªü Qu√† üéÅ</button>
        <p style="color: #888; margin-top: 20px; font-size: 1rem;">(Click ƒë·ªÉ b·∫Øt ƒë·∫ßu)</p>
    </div>

    <audio id="bg-music" loop><source src="music.mp3" type="audio/mpeg"></audio>
    <audio id="tick-sound"><source src="tick.mp3" type="audio/mpeg"></audio>

    <canvas id="galaxy"></canvas>
    <div id="decoration-layer"></div>
    <div id="ui-layer">
        <div id="counter" class="counter">0</div>
        <div id="date" class="date-text">26 / 12 / 2025</div>
        <div id="final-msg" class="final-msg">
            <h1 id="name-display">PH·∫†M TH·ªä HO√ÄNG LINH</h1>
            <p>Ch√∫c em tu·ªïi 19 r·∫°ng r·ª° nh∆∞ d·∫£i ng√¢n h√†! üåå</p>
        </div>
    </div>

    <script>
        const CONFIG = {
            particleCount: 1000, 
            stickers: ['üéÑ', 'üéÇ', 'üéÅ', '‚ùÑÔ∏è', 'ü¶å', 'üïØÔ∏è', 'üç¨', '‚ú®', 'üíñ'],
            stickerCount: 15
        };

        const bgMusic = document.getElementById('bg-music');
        const tickSound = document.getElementById('tick-sound');
        
        function startParty() {
            const startScreen = document.getElementById('start-screen');
            startScreen.style.opacity = 0;
            setTimeout(() => startScreen.remove(), 1000);
            
            // Re-check size khi b·∫Øt ƒë·∫ßu ƒë·ªÉ ƒë·∫£m b·∫£o ch√≠nh x√°c
            resize(); 
            initParticles(); // T·∫°o h·∫°t sau khi ƒë√£ c√≥ size chu·∫©n
            createDecorations();
            animate();
            startIntroScript();
        }

        const canvas = document.getElementById('galaxy');
        const ctx = canvas.getContext('2d');
        let width, height, heartScale, heartOffsetY;

        // H√ÄM RESIZE TH√îNG MINH
        function resize() {
            width = canvas.width = window.innerWidth;
            height = canvas.height = window.innerHeight;
            
            // Logic Responsive cho tim:
            // N·∫øu m√†n h√¨nh nh·ªè (mobile), gi·∫£m ƒë·ªô to (scale) c·ªßa tim
            if (width < 768) {
                heartScale = width / 25; // T·ª± ƒë·ªông t√≠nh to√°n theo chi·ªÅu ngang ƒëi·ªán tho·∫°i
                heartOffsetY = 0; // ƒê·∫©y l√™n gi·ªØa m√†n h√¨nh
            } else {
                heartScale = 16; // PC gi·ªØ nguy√™n
                heartOffsetY = -50;
            }
        }
        window.addEventListener('resize', resize);
        // G·ªçi resize ngay l·∫≠p t·ª©c
        resize();

        function heartFunc(t) {
            const x = 16 * Math.pow(Math.sin(t), 3);
            const y = 13 * Math.cos(t) - 5 * Math.cos(2*t) - 2 * Math.cos(3*t) - Math.cos(4*t);
            return { x, y };
        }

        class GalaxyParticle {
            constructor() { this.reset(true); }
            reset(initial = false) {
                let t = Math.random() * Math.PI * 2;
                let pos = heartFunc(t);
                let dir = Math.sqrt(Math.random()); 
                let type = Math.random();
                if (type < 0.7) dir = dir * 0.9; 
                else dir = dir * 1.2 + 0.2;

                // D√πng heartScale ƒë√£ t√≠nh to√°n ·ªü h√†m resize
                this.targetX = pos.x * heartScale * dir + width / 2;
                this.targetY = -pos.y * heartScale * dir + height / 2 + heartOffsetY;
                
                this.x = this.targetX;
                this.y = this.targetY;
                this.size = Math.random() * 2; 
                this.baseSize = this.size;
                this.blinkSpeed = Math.random() * 0.1 + 0.02;
                this.blinkOffset = Math.random() * Math.PI * 2;
                const colors = ['#ff0055', '#ff3399', '#cc33ff', '#6600ff', '#ffffff', '#ffccff'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
                this.jitterX = (Math.random() - 0.5) * 20; 
                this.jitterY = (Math.random() - 0.5) * 20;
            }
            update(beatScale, time) {
                this.size = this.baseSize + Math.sin(time * 5 + this.blinkOffset) * 0.5;
                if (this.size < 0) this.size = 0;
                
                // Recalculate center (in case resizing happens during animation)
                let cx = width / 2;
                let cy = height / 2 + heartOffsetY;

                let currentTargetX = cx + (this.targetX - cx) * beatScale;
                let currentTargetY = cy + (this.targetY - cy) * beatScale;
                let noiseX = Math.cos(time + this.jitterX) * 2; 
                let noiseY = Math.sin(time + this.jitterY) * 2;
                this.x = currentTargetX + noiseX;
                this.y = currentTargetY + noiseY;
            }
            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = this.color;
                ctx.globalCompositeOperation = 'lighter'; 
                ctx.shadowBlur = 5; ctx.shadowColor = this.color;
                ctx.fill();
                ctx.shadowBlur = 0; ctx.globalCompositeOperation = 'source-over';
            }
        }

        class Firework {
            constructor() {
                this.x = Math.random() * width; this.y = height;
                this.targetY = Math.random() * (height / 2);
                this.speed = 6 + Math.random() * 4; 
                this.radius = 2; this.exploded = false;
                this.color = `hsl(${Math.random() * 360}, 100%, 70%)`;
                this.particles = [];
            }
            update() {
                if (!this.exploded) {
                    this.y -= this.speed;
                    if (this.y <= this.targetY) this.explode();
                } else {
                    this.particles.forEach((p, i) => {
                        p.x += p.vx; p.y += p.vy; p.alpha -= 0.02; p.vy += 0.05;
                        if (p.alpha <= 0) this.particles.splice(i, 1);
                    });
                }
            }
            explode() {
                this.exploded = true;
                for (let i = 0; i < 50; i++) {
                    const a = Math.random() * Math.PI * 2, s = Math.random() * 4 + 1;
                    this.particles.push({x: this.x, y: this.y, vx: Math.cos(a)*s, vy: Math.sin(a)*s, alpha: 1});
                }
            }
            draw() {
                if (!this.exploded) {
                    ctx.beginPath(); ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
                    ctx.fillStyle = this.color; ctx.fill();
                } else {
                    this.particles.forEach(p => {
                        ctx.save(); ctx.globalAlpha = p.alpha; ctx.fillStyle = this.color;
                        ctx.beginPath(); ctx.arc(p.x, p.y, 2, 0, Math.PI * 2); ctx.fill(); ctx.restore();
                    });
                }
            }
        }

        let heartParticles = [];
        const fireworks = [];

        function initParticles() {
            heartParticles = [];
            for (let i = 0; i < CONFIG.particleCount; i++) heartParticles.push(new GalaxyParticle());
        }

        function createDecorations() {
            const layer = document.getElementById('decoration-layer');
            layer.innerHTML = ''; // Clear old stickers
            for(let i=0; i<CONFIG.stickerCount; i++) {
                const el = document.createElement('div');
                el.className = 'sticker';
                el.innerText = CONFIG.stickers[Math.floor(Math.random() * CONFIG.stickers.length)];
                
                // Random position responsive
                let x = Math.random() * 100;
                let y = Math.random() * 100;
                
                el.style.left = x + '%'; 
                el.style.top = y + '%';
                // Font size responsive theo viewport width (vw)
                el.style.fontSize = (Math.random() * 3 + 2) + 'vw'; 
                el.style.animationDuration = (Math.random() * 3 + 4) + 's';
                layer.appendChild(el);
            }
        }

        let frame = 0, showHeart = false, time = 0;
        function animate() {
            ctx.fillStyle = 'rgba(5, 5, 5, 0.2)'; 
            ctx.fillRect(0, 0, width, height);
            time += 0.01;
            if (showHeart) {
                let smoothBeat = 1 + 0.05 * Math.sin(time * 4);
                heartParticles.forEach(p => { p.update(smoothBeat, time); p.draw(); });
                if (Math.random() < 0.03) fireworks.push(new Firework());
                for (let i = fireworks.length - 1; i >= 0; i--) {
                    fireworks[i].update(); fireworks[i].draw();
                    if (fireworks[i].exploded && fireworks[i].particles.length === 0) fireworks.splice(i, 1);
                }
            }
            requestAnimationFrame(animate);
        }

        const counterEl = document.getElementById('counter');
        const dateEl = document.getElementById('date');
        const finalMsgEl = document.getElementById('final-msg');
        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));
        function playTick() { if(tickSound) { tickSound.currentTime=0; tickSound.play().catch(()=>{}); } }

        async function startIntroScript() {
            counterEl.style.opacity = 1;
            for (let i = 0; i <= 19; i++) {
                counterEl.innerText = i;
                if (i < 19) {
                    playTick();
                } else {
                    counterEl.style.color = '#ff3399';
                    counterEl.classList.add('zoom-in');
                    counterEl.innerText = "WELCOME 19";
                    // Font size cho Welcome 19
                    counterEl.style.fontSize = window.innerWidth < 768 ? "15vw" : "10vw"; 
                    
                    bgMusic.volume = 0.6;
                    bgMusic.play().catch((e) => console.log(e));
                }
                let speed = i < 10 ? 150 : 250;
                if (i === 18) speed = 1000;
                await wait(speed);
            }
            await wait(1000);
            counterEl.style.opacity = 0;
            await wait(500);

            dateEl.style.opacity = 1;
            await wait(2000);
            dateEl.style.opacity = 0;
            await wait(500);

            showHeart = true;
            await wait(800);
            finalMsgEl.style.opacity = 1;
        }
    </script>
</body>
</html>
